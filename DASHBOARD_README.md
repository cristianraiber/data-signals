# Data Signals React Dashboard

Revenue-focused analytics dashboard built with React 18, Zustand, and Recharts.

## ğŸ“¦ Installation

```bash
# Install dependencies
npm install

# Build for production
npm run build

# Development mode (with hot reload)
npm run start
```

## ğŸ—ï¸ Structure

```
assets/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx           # Main dashboard with metrics & charts
â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueAttribution.jsx  # Revenue attribution analysis
â”‚   â”‚   â”‚   â”œâ”€â”€ ContentPerformance.jsx  # Content/blog performance table
â”‚   â”‚   â”‚   â”œâ”€â”€ EmailCampaigns.jsx      # Email campaign ROI tracker
â”‚   â”‚   â”‚   â”œâ”€â”€ TrafficSources.jsx      # Traffic source analysis
â”‚   â”‚   â”‚   â””â”€â”€ RealTimeStats.jsx       # Real-time visitor stats
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js              # wp.apiFetch wrappers
â”‚   â”‚   â”‚   â””â”€â”€ formatters.js       # Currency, number, date formatters
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â””â”€â”€ useAnalyticsStore.js    # Zustand global state
â”‚   â”‚   â””â”€â”€ index.jsx               # Main entry point
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ dashboard.css           # Complete styling
â””â”€â”€ build/                          # Compiled output (gitignored)
    â”œâ”€â”€ index.js
    â”œâ”€â”€ index.css
    â””â”€â”€ index.asset.php             # Auto-generated by @wordpress/scripts
```

## ğŸ¨ Components

### 1. Dashboard (Main View)
- **Key Metrics Cards**: Total Revenue, RPV, Conversions, Visits
- **Date Range Selector**: Today, 7d, 30d, 90d, Custom
- **Revenue Trend Chart**: Line chart (Recharts)
- **Traffic Sources Pie Chart**: Revenue by source

### 2. Revenue Attribution
- **Multi-Tab View**: By Source, Campaign, Page, Product
- **Attribution Models**: First Click, Last Click, Linear, Time Decay
- **Drill-Down Table**: Expandable rows with breakdowns
- **Conversion Funnel**: Visual funnel chart

### 3. Content Performance
- **Sortable Table**: Title, Visits, Pricing Clicks, Sales, Revenue, Conv. Rate
- **Search/Filter**: Real-time content search
- **Money Pages**: Top 10% revenue generators highlighted with â­
- **Summary Stats**: Totals and averages

### 4. Email Campaigns
- **Campaign Cards**: ROI, clicks, conversions, revenue
- **Best Performer Badge**: ğŸ† for top campaign
- **Link Performance Table**: CTA-level tracking
- **Journey Map Modal**: Email â†’ Sale path visualization
- **ROI Comparison Chart**: Bar chart of revenue vs. cost

### 5. Traffic Sources
- **Source Cards**: Quality score, revenue, CPA, ROAS
- **Revenue Chart**: Bar chart by source
- **Quality Radar**: Visual quality comparison
- **ROAS Calculator**: Interactive calculator with results

### 6. Real-Time Stats
- **Live Counters**: Visitors, revenue today, conversions today
- **Recent Conversions**: Last 10 purchases with timing
- **Active Pages**: Current visitor distribution
- **Auto-Refresh**: Polls API every 5 seconds

## ğŸ”Œ API Integration

All components use `wp.apiFetch` with the REST API:

**Endpoints:**
- `GET /data-signals/v1/analytics` - Main metrics
- `GET /data-signals/v1/revenue-attribution` - Attribution data
- `GET /data-signals/v1/content-performance` - Content stats
- `GET /data-signals/v1/email-campaigns` - Campaign data
- `GET /data-signals/v1/traffic-sources` - Source analytics
- `GET /data-signals/v1/realtime` - Real-time stats
- `GET /data-signals/v1/revenue-trend` - Trend chart data
- `GET /data-signals/v1/conversion-funnel` - Funnel data
- `GET /data-signals/v1/email-journey/:id` - Journey map
- `POST /data-signals/v1/calculate-roas` - ROAS calculation

**Authentication:**
- Nonce: `wp_create_nonce('wp_rest')`
- Capability: `manage_options`

## ğŸ¯ State Management (Zustand)

Global store: `useAnalyticsStore`

**State:**
- `dateRange` - Current date range
- `datePreset` - Selected preset (today, 7d, 30d, 90d, custom)
- `isLoading` - Loading states per view
- Data states for each component
- Filter states (attribution model, sort order, search)

**Actions:**
- `setDateRange(start, end)` - Set custom range
- `setDatePreset(preset)` - Set preset range
- `setLoading(key, bool)` - Toggle loading
- Data setters for each view
- Filter setters

## ğŸ¨ Styling

**Design System:**
- Colors: Blue (#3b82f6), Green (#10b981), Red (#ef4444), Gray (#6b7280)
- Font: System font stack
- Grid: CSS Grid for responsive layouts
- Cards: White with shadow, 8px border-radius
- Charts: Recharts with custom colors

**Responsive Breakpoints:**
- Desktop: 1024px+
- Tablet: 768px - 1024px
- Mobile: < 768px

**Features:**
- Dark mode support ready
- Loading skeletons
- Empty states
- Error boundaries (add if needed)

## ğŸ”§ WordPress Integration

**Enqueue (class-admin-dashboard.php):**
```php
wp_enqueue_script(
    'data-signals-dashboard',
    $plugin_url . '/assets/build/index.js',
    $asset['dependencies'],
    $asset['version'],
    true
);

wp_localize_script(
    'data-signals-dashboard',
    'dataSignalsSettings',
    array(
        'apiUrl'   => rest_url('data-signals/v1'),
        'nonce'    => wp_create_nonce('wp_rest'),
        'currency' => array('code' => 'USD', 'symbol' => '$'),
    )
);
```

**Root Element:**
```php
<div id="data-signals-dashboard"></div>
```

## ğŸ“Š Data Format Examples

### Analytics Response:
```json
{
  "metrics": {
    "totalRevenue": 12500.00,
    "rpv": 2.50,
    "conversions": 125,
    "visits": 5000
  },
  "trafficSources": [
    {"source": "Organic", "revenue": 5000},
    {"source": "Direct", "revenue": 3500}
  ]
}
```

### Content Performance Response:
```json
{
  "posts": [
    {
      "id": 123,
      "title": "How to...",
      "url": "https://...",
      "visits": 1000,
      "pricingClicks": 50,
      "sales": 10,
      "revenue": 500,
      "conversionRate": 0.05
    }
  ],
  "topRevenueThreshold": 500
}
```

## ğŸš€ Development

**Build Commands:**
```bash
# Development (watch mode)
npm run start

# Production build
npm run build

# Lint JavaScript
npm run lint

# Format code
npm run format
```

**WordPress Scripts:**
Uses `@wordpress/scripts` which provides:
- Webpack bundling
- Babel transpilation
- ESLint + Prettier
- React hot reload
- Automatic dependency extraction

## ğŸ”’ Security

**Client-Side:**
- Nonce verification on all API calls
- Capability checks (manage_options)
- Input sanitization in search/filters

**Server-Side (REST API):**
- `permission_callback` on all routes
- `sanitize_text_field()` on inputs
- Prepared statements for DB queries
- Rate limiting (implement if needed)

## ğŸ¯ Performance

**Optimizations:**
- Code splitting (automatic via Webpack)
- Lazy loading components (add if needed)
- Memoization with `useMemo`, `useCallback`
- API response caching (15min transients)
- Chart data aggregation
- Debounced search input

**Bundle Size:**
- Target: < 300KB (gzipped)
- Current: Check with `npm run build`

## ğŸ“± Browser Support

- Chrome/Edge: Latest 2 versions
- Firefox: Latest 2 versions
- Safari: Latest 2 versions
- iOS Safari: Latest 2 versions
- Android Chrome: Latest 2 versions

## ğŸ› Troubleshooting

**Build fails:**
```bash
rm -rf node_modules package-lock.json
npm install
npm run build
```

**Dashboard not loading:**
1. Check browser console for errors
2. Verify REST API is accessible: `/wp-json/data-signals/v1/analytics`
3. Check nonce is valid
4. Ensure user has `manage_options` capability

**Styles not applying:**
1. Clear browser cache
2. Rebuild: `npm run build`
3. Check `assets/build/index.css` exists
4. Verify enqueue in `class-admin-dashboard.php`

## ğŸ“ TODO (Future Enhancements)

- [ ] Add export to CSV functionality
- [ ] Implement dashboard widgets (customizable layout)
- [ ] Add comparison mode (compare date ranges)
- [ ] Dark mode toggle
- [ ] Multi-site support
- [ ] User role-based view restrictions
- [ ] PDF report generation
- [ ] Scheduled email reports
- [ ] Custom date range presets
- [ ] Dashboard sharing (public links)

## ğŸ“„ License

GPL v2 or later
