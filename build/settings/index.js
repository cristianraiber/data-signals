(()=>{"use strict";var e,s={168(e,s,a){const t=window.wp.element,n=window.wp.apiFetch;var l=a.n(n);const i=window.wp.i18n,d=window.wp.components,o=window.ReactJSXRuntime,r=({title:e,fields:s,data:a,onChange:t,onSave:n,saving:l})=>(0,o.jsxs)("div",{className:"ds-settings-card",children:[(0,o.jsx)("div",{className:"ds-settings-card-header",children:(0,o.jsx)("h3",{children:e})}),(0,o.jsx)("div",{className:"ds-settings-card-body",children:s.map(e=>{const s=a[e.id];return"boolean"===e.type?(0,o.jsx)(d.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.label,help:e.description,checked:!!s,onChange:s=>t({[e.id]:s})},e.id):e.elements&&e.elements.length>0?(0,o.jsx)(d.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:e.label,help:e.description,value:s||"",options:e.elements,onChange:s=>t({[e.id]:s})},e.id):null})}),(0,o.jsx)("div",{className:"ds-settings-card-footer",children:(0,o.jsx)(d.Button,{variant:"primary",onClick:n,isBusy:l,disabled:l,children:l?(0,i.__)("Savingâ€¦","data-signals"):(0,i.__)("Save","data-signals")})})]}),c=[{id:"exclude_admins",label:(0,i.__)("Exclude Logged-in Admins","data-signals"),type:"boolean",Edit:"toggle",description:(0,i.__)("Do not track pageviews from administrators.","data-signals")},{id:"exclude_bots",label:(0,i.__)("Exclude Known Bots","data-signals"),type:"boolean",Edit:"toggle",description:(0,i.__)("Filter out known search engine crawlers and bots.","data-signals")},{id:"honor_dnt",label:(0,i.__)("Honor Do Not Track","data-signals"),type:"boolean",Edit:"toggle",description:(0,i.__)("Respect the browser Do Not Track (DNT) setting.","data-signals")}],g=[{id:"data_retention_days",label:(0,i.__)("Data Retention Period","data-signals"),type:"text",elements:[{value:"30",label:(0,i.__)("30 days","data-signals")},{value:"60",label:(0,i.__)("60 days","data-signals")},{value:"90",label:(0,i.__)("90 days","data-signals")},{value:"180",label:(0,i.__)("180 days","data-signals")},{value:"365",label:(0,i.__)("1 year","data-signals")},{value:"0",label:(0,i.__)("Forever","data-signals")}],description:(0,i.__)("How long to keep analytics data before automatic deletion.","data-signals")}],v=[{id:"default_period",label:(0,i.__)("Default Date Range","data-signals"),type:"text",elements:[{value:"7",label:(0,i.__)("Last 7 days","data-signals")},{value:"30",label:(0,i.__)("Last 30 days","data-signals")},{value:"90",label:(0,i.__)("Last 90 days","data-signals")}],description:(0,i.__)("Default time period shown on the dashboard.","data-signals")}],_=()=>(0,o.jsxs)("div",{className:"ds-settings-wrap",children:[(0,o.jsx)("div",{className:"ds-settings-header",children:(0,o.jsxs)("div",{className:"ds-settings-header-inner",children:[(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-logo"}),(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-title"})]})}),(0,o.jsx)("div",{className:"ds-settings-content",children:(0,o.jsxs)("div",{className:"ds-skeleton-content",children:[(0,o.jsxs)("div",{className:"ds-skeleton-field",children:[(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-label"}),(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-toggle"})]}),(0,o.jsxs)("div",{className:"ds-skeleton-field",children:[(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-label"}),(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-toggle"})]}),(0,o.jsxs)("div",{className:"ds-skeleton-field",children:[(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-label"}),(0,o.jsx)("div",{className:"ds-skeleton ds-skeleton-toggle"})]})]})})]}),h=()=>{const[e,s]=(0,t.useState)({}),[a,n]=(0,t.useState)(!0),[h,m]=(0,t.useState)(null),[u,p]=(0,t.useState)([]),x=(0,t.useCallback)(e=>{p(s=>s.filter(s=>s.id!==e))},[]),b=(0,t.useCallback)((e,s)=>{const a=`${Date.now()}-${Math.random().toString(16).slice(2)}`,t={id:a,status:e,content:s};p(e=>[t,...e].slice(0,5)),setTimeout(()=>x(a),6e3)},[x]),j=(0,t.useCallback)(async()=>{try{const e=await l()({path:"/data-signals/v1/settings"});s(e)}catch(e){b("error",(0,i.__)("Error loading settings.","data-signals"))}finally{n(!1)}},[b]);(0,t.useEffect)(()=>{j()},[j]);const k=async s=>{m(s);try{await l()({path:"/data-signals/v1/settings",method:"POST",data:e}),b("success",(0,i.__)("Settings saved!","data-signals"))}catch(e){b("error",(0,i.__)("Error saving settings.","data-signals"))}finally{m(null)}},w=e=>{s(s=>({...s,...e}))};return a?(0,o.jsx)(_,{}):(0,o.jsxs)("div",{className:"ds-settings-wrap",children:[(0,o.jsx)("div",{className:"ds-settings-header",children:(0,o.jsxs)("div",{className:"ds-settings-header-inner",children:[(0,o.jsx)("span",{className:"ds-icon",children:"ðŸ“Š"}),(0,o.jsx)("span",{className:"ds-settings-title",children:"Data Signals"})]})}),(0,o.jsx)("div",{className:"ds-toast-container",children:(0,o.jsx)(d.SnackbarList,{notices:u,onRemove:x})}),(0,o.jsxs)("div",{className:"ds-settings-content",children:[(0,o.jsx)(r,{title:(0,i.__)("Tracking Options","data-signals"),fields:c,data:e,onChange:w,onSave:()=>k("tracking"),saving:"tracking"===h}),(0,o.jsx)(r,{title:(0,i.__)("Data Retention","data-signals"),fields:g,data:e,onChange:w,onSave:()=>k("retention"),saving:"retention"===h}),(0,o.jsx)(r,{title:(0,i.__)("Dashboard Options","data-signals"),fields:v,data:e,onChange:w,onSave:()=>k("dashboard"),saving:"dashboard"===h})]})]})};window.dataSignalsAdmin&&(l().use(l().createNonceMiddleware(window.dataSignalsAdmin.restNonce)),l().use(l().createRootURLMiddleware(window.dataSignalsAdmin.restUrl)));const m=document.getElementById("data-signals-settings");m&&(0,t.createRoot)(m).render((0,o.jsx)(h,{}))}},a={};function t(e){var n=a[e];if(void 0!==n)return n.exports;var l=a[e]={exports:{}};return s[e](l,l.exports,t),l.exports}t.m=s,e=[],t.O=(s,a,n,l)=>{if(!a){var i=1/0;for(c=0;c<e.length;c++){for(var[a,n,l]=e[c],d=!0,o=0;o<a.length;o++)(!1&l||i>=l)&&Object.keys(t.O).every(e=>t.O[e](a[o]))?a.splice(o--,1):(d=!1,l<i&&(i=l));if(d){e.splice(c--,1);var r=n();void 0!==r&&(s=r)}}return s}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,n,l]},t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={641:0,69:0};t.O.j=s=>0===e[s];var s=(s,a)=>{var n,l,[i,d,o]=a,r=0;if(i.some(s=>0!==e[s])){for(n in d)t.o(d,n)&&(t.m[n]=d[n]);if(o)var c=o(t)}for(s&&s(a);r<i.length;r++)l=i[r],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(c)},a=globalThis.webpackChunkdata_signals=globalThis.webpackChunkdata_signals||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))})();var n=t.O(void 0,[69],()=>t(168));n=t.O(n)})();